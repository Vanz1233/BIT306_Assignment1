{% extends 'service_dashboard/base.html' %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-white sidebar collapse">
            <div class="position-sticky pt-3">
                <div class="px-3 mb-4 text-center">
                    <h6 class="text-uppercase text-muted fw-bold small tracking-wide">CSR Admin Panel</h6>
                </div>
                
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}" href="{% url 'admin_dashboard' %}">
                            <i class="me-2 fs-5">ðŸ“Š</i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if 'notifications' in request.path %}active{% endif %}" href="{% url 'notifications:admin_panel' %}">
                            <i class="me-2 fs-5">ðŸ“¢</i> Broadcasts
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/service_dashboard/ngo/">
                            <i class="me-2 fs-5">ðŸ“‹</i> Manage Events
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/auth/user/">
                            <i class="me-2 fs-5">ðŸ‘¥</i> User Database
                        </a>
                    </li>
                </ul>

                <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                    <span>Attendance & QR</span>
                </h6>
                <ul class="nav flex-column mb-2">
                    <li class="nav-item">
                        <a class="nav-link text-danger" href="{% url 'scanner_prototype' %}">
                            <i class="me-2 fs-5">ðŸ“·</i> Scan Ticket (Hardcoded)
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 bg-light main-content-area">
            <div class="pt-4 pb-5">
                {% block admin_content %}
                {% endblock %}
            </div>
        </main>
    </div>
</div>

<style>
    /* 1. LOCK THE WINDOW */
    body {
        overflow: hidden; /* Disables browser scrollbar */
    }

    /* 2. SIDEBAR CONFIG */
    .sidebar {
        position: fixed;
        top: 56px;
        bottom: 0;
        left: 0;
        z-index: 100;
        padding: 0;
        box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
    }

    /* 3. MAIN CONTENT SCROLLABLE AREA */
    .main-content-area {
        position: fixed;
        top: 56px;    /* Starts below Navbar */
        bottom: 0;    /* Ends at bottom of screen */
        right: 0;     /* Anchored to right */
        overflow-y: auto; /* Internal scrollbar ONLY if content is too long */
        height: calc(100vh - 56px);
    }

    /* Styling Links */
    .sidebar .nav-link {
        font-weight: 500;
        color: #333;
        padding: 12px 16px;
    }
    .sidebar .nav-link:hover {
        background-color: #f8f9fa;
        color: #007bff;
    }
    .sidebar .nav-link.active {
        color: #007bff;
        background-color: #eaf4ff;
        border-right: 3px solid #007bff;
    }
</style>
{% endblock %}